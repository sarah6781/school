(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{74:function(e,n,t){"use strict";t.r(n),t.d(n,"registerConnectModal",(function(){return m}));var s=t(80),i=t.n(s),a=i.a.component("modal",{template:' \n    <div class="common-modal" :class="{\'visible\': visible}">\n      <div class="mask-modal" @click="close"></div>\n        <div class="wrapper">\n          <div class="container">\n            <div class="cross" v-if="cross" @click="close">\n              <span class="picto"></span> \n            </div>\n            <slot name="content"></slot>\n          </div>\n        </div>\n    </div>\n  ',props:{cross:{type:Boolean,default:!1},visible:{type:Boolean,default:!1}},methods:{close:function(){this.$emit("escape")}},created:function(){var e=this;window.addEventListener("keyup",(function(n){27===n.keyCode&&e.close()}))},destroyed:function(){var e=this;window.removeEventListener("keyup",(function(n){27===n.keyCode&&e.close()}))}}),l=i.a.component("loader",{template:'\n    <div class="v-loader" :class="{\'visible\': visible, \'center\': center}">\n      <div class="dot dot1"></div>\n      <div class="dot dot2"></div>\n      <div class="dot dot3"></div>\n      <div class="dot dot4"></div>\n    </div>\n  ',props:{visible:{default:!0},center:{default:!0}}}),o=t(1),r=i.a.component("input-holder",{template:'\n    <div class="input-holder" :class="{\'focus\': focused, \'success\': success, \'error\': error, \'pending\': pending}">\n      <span ref="label" class="label" :style="style.label">{{ label }}</span>\n      <input v-model="value" :name="bidule" @change="emit" @keyup="emit" @keyup.enter.prevent="emitSubmit" ref="input" :placeholder="placeholder" :type="type" @focus="toggleFocus(true)" @blur="toggleFocus(false)"/>\n    </div>\n  ',data:function(){return{focused:!1,style:{label:{top:null}}}},computed:{success:function(){return"boolean"==typeof this.validation&&this.validation},error:function(){return"boolean"==typeof this.validation&&!this.validation},pending:function(){return"pending"===this.validation}},methods:{toggleFocus:function(e){this.focused=e},emit:function(){var e={};e[this.name]=this.value,this.$emit("change",e)},emitSubmit:function(){this.$emit("enter")}},mounted:function(){if(this.$refs.label){this.style.label.top="-".concat(20,"px")}},props:{id:{type:String,default:null},name:{type:String,default:null},bidule:{type:String,default:null},label:{type:String,default:null},type:{type:String,default:"text"},placeholder:{type:String,default:""},validation:{type:Boolean,default:"pending"},value:{type:String,default:""}}}),c=i.a.component("signup",{template:'\n    <div class="popin-content signup" :class="{\'visible\': visible, \'signin-with-mail\': emailSignupVisible, \'safari\': isSafari, \'ads\': tpl.isAds }">\n      <div class="upper"> \n          <p class="title" v-html="labels.signup"></p>\n            <template v-if="tpl.isAds">\n              <p class="subtitle" v-html="treatTrad(labels.to_contact__FIRSTNAME, {tpl_prenom: tpl.adsName})"></p>\n              <div class="teacher-bloc">\n                  <div class="teacher">\n                    <div class="avatar" :style="\'background-image: url(\' + tpl.adsAvatar + \')\'"></div>\n                    <div class="star" :class="{\'animation\': visible}" v-html="tpl.stars"></div>\n                  </div> \n                  <div class="text">\n                      <p class="emphasis" v-html="labels.rare_pearl"></p>\n                      <p v-html="treatTrad(labels.FIRSTNAME__is_highly_coveted_this_month, {tpl_prenom: tpl.adsName})"></p>\n                  </div>\n              </div>\n            </template>\n            <div class="email-inputs">\n                <form id="signup-form">\n                    <div class="names-wrapper">\n                        <input-holder :value="inputs.firstname" @enter="signupPreCall()" @change="mergeInput" :id="\'signin-firstname\'" :name="\'firstname\'" :label="labels.firstname" :placeholder="labels.firstname" :validation="inputsValidation.firstname"></input-holder>\n                        <input-holder :value="inputs.lastname" @enter="signupPreCall()" @change="mergeInput" :id="\'signin-lastname\'" :name="\'lastname\'" :label="labels.lastname" :placeholder="labels.lastname" :validation="inputsValidation.lastname"></input-holder> \n                    </div>\n                    <input-holder :value="inputs.email" @enter="signupPreCall()" @change="mergeInput" :id="\'signin-email\'" :name="\'email\'"  :bidule="\'email\'" :label="labels.email_adress" :placeholder="labels.email_adress" :validation="inputsValidation.email"></input-holder>\n                    <input-holder :value="inputs.password" @enter="signupPreCall()" @change="mergeInput" :id="\'signin-password\'" :name="\'password\'"  :bidule="\'password\'" :label="labels.create_password" :type="\'password\'" :placeholder="labels.create_password" :validation="inputsValidation.password"></input-holder>\n                </form>\n            </div>\n            <p v-show="errors.signup" class="error-text">{{ errors ? errors.signup : \'\' }}</p> \n        </div>\n        <div class="bottom"> \n            <div class="buttons-container">\n                <div class="social-buttons"> \x3c!-- :class="{\'alone\': !multipleSocials}"> --\x3e\n                    <a v-if="url.facebook" @click="facebookConnect" class="big-button facebook">\n                        <div class="picto"></div>\n                        <p class="text long" v-html="labels.signup_with_facebook"></p>\n                        <p class="text short" v-html="labels.facebook"></p>\n                    </a> \n                    <div class="big-button google google-connect">\n                        <div class="picto"></div>\n                        <p class="text long" v-html="labels.signup_with_google"></p>\n                        <p class="text short" v-html="labels.google"></p>\n                    </div>\n                </div>\n                <div class="big-button mail" @click="signupPreCall()"> \n                    <div class="picto"></div>\n                    <p class="text" v-html="labels.signup_with_email"></p>\n                </div>\n            </div>\n            <div class="sign-text">\n                <span v-html="labels.already_have_an_account"></span>\n                <span class="emphasis" @click="changeId(ids.signin)" v-html="labels.signin"></span>\n            </div>\n            <div class="signin-cgu">\n                <p v-html="treatTrad(labels.cgu_text, {tpl_url_cgu: tpl.urlCgu})"></p>\n            </div>\n        </div>\n    </div>\n  ',name:"signup",components:{InputHolder:r},props:{mergeInput:{type:String,default:null},visible:{type:Boolean,default:null},inputs:{type:Object,default:{}},inputsValidation:{type:Object,default:{}},emailSignupVisible:{type:String,default:null},signupPreCall:{type:Function,default:null},errors:{type:Object,default:{}},multipleSocials:{type:Boolean,default:null},isSafari:{type:Boolean,default:!1},changeId:{type:Function,default:null},ids:{type:Object,default:{}},facebookConnect:{type:Function,default:null},url:{type:Object,default:{}},modalVisible:{type:Boolean,default:!1},tpl:{type:Object,default:{}},labels:{type:Object,default:{}},treatTrad:{type:Function,default:null}}}),p=i.a.component("signin",{template:'\n    <div class="popin-content signin" :class="{\'visible\': visible, \'safari\': isSafari, \'ads\': tpl.isAds }">\n      <div class="upper">\n          <p class="title" v-html="labels.signin"></p>\n          <template v-if="tpl.isAds">\n            <p class="subtitle" v-html="treatTrad(labels.to_contact__FIRSTNAME, {tpl_prenom: tpl.adsName})"></p>\n            <div class="teacher-bloc">\n                <div class="teacher">\n                  <div class="avatar" :style="\'background-image: url(\' + tpl.adsAvatar + \')\'"></div>\n                  <div class="star" :class="{\'animation\': visible}" v-html="tpl.stars"></div>\n                </div> \n                <div class="text">\n                    <p class="emphasis" v-html="labels.rare_pearl"></p>\n                    <p v-html="treatTrad(labels.FIRSTNAME__is_highly_coveted_this_month, {tpl_prenom: tpl.adsName})"></p>\n                </div>\n            </div>\n          </template>\n          <div class="login">\n              <form id="signin-form">\n                  <input-holder :value="inputs[\'signin-email\']" @enter="signinPreCall()" @change="updateInput" :id="\'signin-email\'" :name="\'signin-email\'" :bidule="\'email\'" :label="labels.email_adress" :placeholder="labels.email_adress" :validation="inputsValidation.signinEmail"></input-holder>\n                  <input-holder :value="inputs[\'signin-password\']" @enter="signinPreCall()" @change="updateInput" :id="\'signin-password\'" :name="\'signin-password\'" :bidule="\'password\'" :label="labels.password" :type="\'password\'" :placeholder="labels.password" :validation="inputsValidation.signinPassword"></input-holder>\n              </form>\n          </div>\n          <p v-show="errors.signin" class="error-text">{{ errors ? errors.signin : \'\' }}</p> \n      </div>\n      <div class="bottom">\n          <div class="buttons-container">\n              <div class="social-buttons"> \x3c!-- :class="{\'alone\': !multipleSocials}"> --\x3e \n                  <a v-if="url.facebook" @click="facebookConnect" class="big-button facebook">\n                      <div class="picto"></div>\n                      <p class="text long" v-html="labels.signup_with_facebook"></p>\n                      <p class="text short" v-html="labels.facebook"></p>\n                  </a> \n                  <div class="big-button google google-connect">\n                      <div class="picto"></div> \n                      <p class="text long" v-html="labels.signup_with_google"></p>\n                      <p class="text short" v-html="labels.google"></p>\n                  </div>\n              </div>\n              <div class="big-button mail" @click="signinPreCall()">\n                  <p class="text" v-html="labels.connexion"></p>\n              </div>\n          </div>\n          <div class="sign-text">\n              <span v-html="labels.dont_have_an_account_yet"></span>\n              <span class="emphasis" @click="changeId(ids.signup)" v-html="labels.signup"></span>\n          </div>\n          <p class="forgot-password" @click="changeId(ids.passwordReset)" v-html="labels.forgot_your_password"></p>\n      </div>\n    </div>\n  ',name:"signin",components:{InputHolder:r},props:{mergeInput:{type:String,default:null},visible:{type:Boolean,default:null},errors:{type:Object,default:{}},multipleSocials:{type:Boolean,default:null},isSafari:{type:Boolean,default:!1},changeId:{type:Function,default:null},ids:{type:Object,default:{}},signinPreCall:{type:Function,default:null},updateInput:{type:Function,default:null},inputs:{type:Object,default:{}},inputsValidation:{type:Object,default:{}},facebookConnect:{type:Function,default:null},url:{type:Object,default:{}},modalVisible:{type:Boolean,default:!1},tpl:{type:Object,default:{}},labels:{type:Object,default:{}},treatTrad:{type:Function,default:null}}}),u=i.a.component("password-reset",{template:'\n    <div class="popin-content reset" :class="{\'visible\': visible, \'safari\': isSafari}">\n        <div class="reset">\n            <h1 class="title" v-html="labels.reset_password"></h1>\n            <p class="text" v-html="labels.to_recover_your_password_indicate_email_of_your_account"></p>\n            <input-holder @enter="resetPreCall" @change="updateInput" :id="\'reset-password\'" :name="\'reset\'" :label="labels.email_adress" :placeholder="labels.email_adress" :validation="inputsValidation.reset"></input-holder>\n            <p v-show="success.reset" class="success-text">{{ success ? success.reset : \'\' }}</p> \n            <p v-show="errors.reset" class="error-text">{{ errors ? errors.reset : \'\' }}</p> \n            <p class="send-button" @click="resetPreCall"><span class="text" v-html="labels.send"></span></p>\n            <div class="back" @click="changeId(ids.signin)">\n                <span class="arrow text" v-html="labels.back_to_the_login_screen"></span>\n            </div>\n        </div>\n    </div>\n  ',name:"passwordReset",components:{InputHolder:r},props:{visible:{type:Boolean,default:null},ids:{type:Object,default:{}},updateInput:{type:Function,default:null},inputsValidation:{type:Object,default:{}},success:{type:Object,default:{}},errors:{type:Object,default:{}},changeId:{type:Function,default:null},resetPreCall:{type:Function,default:null},isSafari:{type:Boolean,default:!1},modalVisible:{type:Boolean,default:!1},tpl:{type:Object,default:{}},labels:{type:Object,default:{}},treatTrad:{type:Function,default:null}}});function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(){var e=i.a.component("connect",{template:'\n      <div class="connect" :class="{\'loading\': loading, \'hide-content\': !modalVisible}">\n        \x3c!-- <google-connect ref="google-connect" :el="elementHandler.google" :info="null" :complement="null" :idAds="idAds" @error="googleConnectErr"></google-connect> --\x3e\n        <modal :visible="modalVisible" :cross="true" @escape="closeModal">  \x3c!-- :visible="modalVisible" --\x3e\n          <template slot="content">\n            <loader :visible="loading"></loader>\n            <signup :visible="activeId(ids.signup)" \n                    :emailSignupVisible="emailSignupVisible"\n                    :inputs="signupInput"\n                    :inputsValidation="inputsValidation"\n                    :signupPreCall="signupPreCall"\n                    :facebookConnect="facebookConnect"\n                    :mergeInput="mergeInput"\n                    :errors="errors"\n                    :multipleSocials="multipleSocials" \n                    :isSafari="isSafari"\n                    :changeId="changeId" \n                    :ids="ids"\n                    :url="url"\n                    :modalVisible="modalVisible"\n                    :labels="labels"\n                    :tpl="tpl"\n                    :treatTrad="treatTrad"></signup>\n                    \x3c!-- :signupInputValidation="inputsValidation" replace by :inputsValidation="inputsValidation" props also --\x3e\n            <signin :visible="activeId(ids.signin)" \n                    :updateInput="updateInput"\n                    :inputs="inputs"\n                    :inputsValidation="inputsValidation"\n                    :signinPreCall="signinPreCall"\n                    :facebookConnect="facebookConnect"\n                    :errors="errors"\n                    :multipleSocials="multipleSocials"\n                    :isSafari="isSafari"\n                    :changeId="changeId"\n                    :ids="ids"\n                    :url="url"\n                    :modalVisible="modalVisible"\n                    :labels="labels"\n                    :tpl="tpl"\n                    :treatTrad="treatTrad"></signin>\n            <password-reset :visible="activeId(ids.passwordReset)"\n                            :ids="ids"\n                            :updateInput="updateInput"\n                            :inputsValidation="inputsValidation"\n                            :success="success"\n                            :errors="errors"\n                            :changeId="changeId"\n                            :resetPreCall="resetPreCall"\n                            :isSafari="isSafari"\n                            :modalVisible="modalVisible"\n                            :labels="labels"\n                            :tpl="tpl"\n                            :treatTrad="treatTrad"></password-reset>\n          </template>\n        </modal>\n    </div>\n    ',components:{Loader:l,Modal:a,Signup:c,Signin:p,PasswordReset:u},data:function(){return{loading:!0,ids:{signin:"signin",signup:"signup",passwordReset:"password-reset"},specificType:null,modalVisible:!1,modalVisibleAlreadyOpened:!1,currentVisible:null,currentType:null,emailSignupVisible:!1,isSafari:!1,inputs:{"signin-email":"","signin-password":""},inputsValidation:{},signupInput:{firstname:"",lastname:"",email:"",password:""},signupInputValidation:{},firstValidationDone:!1,elementHandler:{google:".google-connect"},url:{facebook:null},success:{reset:""},errors:{signup:"",signin:"",reset:""},formRecoAlreadyClicked:!1,formHelpAlreadyClicked:!1,tpl:{urlCgu:null,isAds:null,adsName:null,adsAvatar:null,stars:null},labels:{signup:"",signin:"",to_contact__FIRSTNAME:"",rare_pearl:"",FIRSTNAME__is_highly_coveted_this_month:"",firstname:"",lastname:"",email_adress:"",create_password:"",signup_with_email:"",signup_with_facebook:"",signup_with_google:"",facebook:"",google:"",cgu_text:"",password:"",already_have_an_account:"",dont_have_an_account_yet:"",forgot_your_password:"",reset_password:"",to_recover_your_password_indicate_email_of_your_account:"",send:"",back_to_the_login_screen:""},labelsLoaded:!1}},computed:{multipleSocials:function(){var e=document.querySelectorAll("".concat(this.currentVisible," .social-buttons"));return!!e&&e.length>1}},methods:{activeId:function(e){return this.currentVisible===e},changeId:function(e){this.currentVisible=e},openModal:function(e,n){this.modalVisible=!0,this.currentType=n,this.changeId(e)},closeModal:function(){this.modalVisible=!1,this.emailSignupVisible=!1,window.giftCard&&(window.giftCard=null)},setVisible:function(e){e&&(this.modalVisible=!0)},mergeInput:function(e){this.signupInput=Object.assign(this.signupInput,e,{}),this.firstValidationDone&&this.check({firstname:!!this.signupInput.firstname&&this.ruleCheck("name",this.signupInput.firstname),lastname:!!this.signupInput.lastname&&this.ruleCheck("name",this.signupInput.lastname),email:!!this.signupInput.email&&this.ruleCheck("email",this.signupInput.email),password:!!this.signupInput.password&&this.ruleCheck("password",this.signupInput.password)})},updateInput:function(e){this.inputs=Object.assign(this.inputs,e,{})},checkSignupInput:function(){this.check({firstname:!!this.signupInput.firstname&&this.ruleCheck("name",this.signupInput.firstname),lastname:!!this.signupInput.lastname&&this.ruleCheck("name",this.signupInput.lastname),email:!!this.signupInput.email&&this.ruleCheck("email",this.signupInput.email),password:!!this.signupInput.password&&this.ruleCheck("password",this.signupInput.password)})},check:function(e){this.inputsValidation=Object.assign({},this.inputsValidation,e)},signupPreCall:function(){var e=this;if(this.emailSignupVisible){this.firstValidationDone=!0,this.checkSignupInput();var n=Object.keys(this.inputsValidation);if(n.filter((function(n){return e.inputsValidation[n]})).length===n.length){var t={prenom:this.signupInput.firstname,nom:this.signupInput.lastname,mail:this.signupInput.email,pwd:this.signupInput.password,info:this.info?this.info:null,complement:this.complement?this.complement:null,type:2};"ads"===this.currentType&&this.idAds&&(t.id_annonce=this.idAds),"gift-card"===this.currentType&&window.giftCard&&(t.gift_card=window.giftCard),"give-card"===this.currentType&&(t.give_card=!0),this.signupConnectCall(t)}else this.errors&&(this.errors.signup=null)}else this.emailSignupVisible=!0},sendReco:function(e){this.recoCall({_commentaire:document.querySelector("#why_him").value},e)},signupConnectCall:function(e){var n=this;this.popinConnectCall(e).then((function(t){if("OK"===t.status){if("aide"===e.info);else if("reco"===e.info)return n.formRecoAlreadyClicked=!0,void document.querySelector("#form_reco [type=submit]").click();t.url?window.location=t.url:window.location.reload(!1)}else n.check({firstname:!!t.champs_errors&&"prenom"!==t.champs_errors,lastname:!!t.champs_errors&&"nom"!==t.champs_errors,email:!!t.champs_errors&&"mail"!==t.champs_errors,password:!!t.champs_errors&&"pwd"!==t.champs_errors}),n.errors&&(n.errors.signup=t.msg_erreur?t.msg_erreur:"error")})).catch((function(e){console.log(e)}))},signinPreCall:function(){if(this.check({signinEmail:!!this.inputs["signin-email"]&&this.ruleCheck("email",this.inputs["signin-email"]),signinPassword:!!this.inputs["signin-password"]&&this.ruleCheck("text",this.inputs["signin-password"])}),this.inputsValidation.signinEmail&&this.inputsValidation.signinPassword){var e={mail:this.inputs["signin-email"],pwd:this.inputs["signin-password"],info:!!this.info&&this.info,complement:this.complement?this.complement:null,type:1};"ads"===this.currentType&&this.idAds&&(e.id_annonce=this.idAds),"gift-card"===this.currentType&&window.giftCard&&(e.gift_card=window.giftCard),"give-card"===this.currentType&&(e.give_card=!0),this.signinCall(e)}},signinCall:function(e){var n=this;this.popinConnectCall(e).then((function(t){if("OK"===t.status){if("aide"===e.info);else if("reco"===e.info)return n.formRecoAlreadyClicked=!0,void document.querySelector("#form_reco [type=submit]").click();t.url?window.location=t.url:window.location.reload(!1)}else n.check({signinEmail:!1,signinPassword:!1}),n.errors.signin=t.msg_erreur?t.msg_erreur:"error"})).catch((function(e){console.log(e)}))},resetPreCall:function(){if(this.check({reset:!!this.inputs.reset&&this.ruleCheck("email",this.inputs.reset)}),this.inputsValidation.reset){var e={mail:this.inputs.reset,type:3};this.resetCall(e)}},resetCall:function(e){var n=this;this.popinConnectCall(e).then((function(e){console.log("reset call > data:",e),"OK"===e.status?(e.message&&(n.success.reset=e.message),n.errors.reset&&(n.errors.reset="")):(n.check({reset:!1}),n.success.reset&&(n.success.reset=""),n.errors.reset=e.msg_erreur?e.msg_erreur:"error")})).catch((function(e){console.log(e)}))},recoCall:function(e,n){this.ajaxRecoCall(e).then((function(e){var t=null;"OK"===(t="string"==typeof e?JSON.parse(e):e).status?n&&window.location.reload(!1):console.log("status: err",t)})).catch((function(e){console.log(e)}))},popinConnectCall:function(e){return new Promise((function(n,t){$.ajax({type:"POST",url:"/a/popinConnect/",data:e,success:function(e){n(e)},error:function(e){t(e)}})}))},ajaxRecoCall:function(e){return new Promise((function(n,t){$.ajax({type:"POST",url:"/a/recoSaveComment/",data:e,success:function(e){n(e)},error:function(e){t(e)}})}))},labelsTplCall:function(){var e=this,n={};this.idAds&&(n.id_annonce=this.idAds),this.apiV2Connect(n).then((function(n){n.trad&&(e.labels.signup=n.trad["Inscrivez-vous"]?n.trad["Inscrivez-vous"]:"",e.labels.signin=n.trad["Connectez-vous"]?n.trad["Connectez-vous"]:"",e.labels.to_contact__FIRSTNAME=n.trad["pour contacter @TPL_PRENOM@"]?n.trad["pour contacter @TPL_PRENOM@"]:"",e.labels.rare_pearl=n.trad["C’est une perle rare"]?n.trad["C’est une perle rare"]:"",e.labels.FIRSTNAME__is_highly_coveted_this_month=n.trad["@TPL_PRENOM@ est très convoité(e) ce mois-ci."]?n.trad["@TPL_PRENOM@ est très convoité(e) ce mois-ci."]:"",e.labels.firstname=n.trad["Prénom"]?n.trad["Prénom"]:"",e.labels.lastname=n.trad.Nom?n.trad.Nom:"",e.labels.email_adress=n.trad["Adresse e-mail"]?n.trad["Adresse e-mail"]:"",e.labels.create_password=n.trad["Créer un mot de passe"]?n.trad["Créer un mot de passe"]:"",e.labels.signup_with_email=n.trad["Inscription avec e-mail"]?n.trad["Inscription avec e-mail"]:"",e.labels.signup_with_facebook=n.trad["Inscription avec Facebook"]?n.trad["Inscription avec Facebook"]:"",e.labels.signup_with_google=n.trad["Inscription avec Google"]?n.trad["Inscription avec Google"]:"",e.labels.facebook=n.trad.Facebook?n.trad.Facebook:"",e.labels.google=n.trad.Google?n.trad.Google:"",e.labels.cgu_text=n.trad["En vous inscrivant par e-mail ou Facebook, vous acceptez nos mentions legales."]?n.trad["En vous inscrivant par e-mail ou Facebook, vous acceptez nos mentions legales."]:"",e.labels.password=n.trad["Mot de passe"]?n.trad["Mot de passe"]:"",e.labels.already_have_an_account=n.trad["Vous avez déjà un compte ?"]?n.trad["Vous avez déjà un compte ?"]:"",e.labels.dont_have_an_account_yet=n.trad["Vous n'avez pas encore de compte ?"]?n.trad["Vous n'avez pas encore de compte ?"]:"",e.labels.forgot_your_password=n.trad["Mot de passe oublié ?"]?n.trad["Mot de passe oublié ?"]:"",e.labels.reset_password=n.trad["Réinitialiser le mot de passe"]?n.trad["Réinitialiser le mot de passe"]:"",e.labels.to_recover_your_password_indicate_email_of_your_account=n.trad["Pour récupérer votre mot de passe, indiquez dans le champ ci-dessous l'adresse e-mail de votre compte."]?n.trad["Pour récupérer votre mot de passe, indiquez dans le champ ci-dessous l'adresse e-mail de votre compte."]:"",e.labels.send=n.trad.Envoyer?n.trad.Envoyer:"",e.labels.back_to_the_login_screen=n.trad["Retour à l’écran connexion"]?n.trad["Retour à l’écran connexion"]:"",e.labels.connexion=n.trad.Connexion?n.trad.Connexion:""),n.tpl&&(e.tpl.urlCgu=n.tpl.TPL_URL_CGU?n.tpl.TPL_URL_CGU:null,e.tpl.isAds=n.tpl.TPL_IF_IS_ANNONCE?n.tpl.TPL_IF_IS_ANNONCE:null,e.tpl.adsName=n.tpl.TPL_PRENOM?n.tpl.TPL_PRENOM:null,e.tpl.adsAvatar=n.tpl.TPL_URL_IMG_ANNOUNCE?n.tpl.TPL_URL_IMG_ANNOUNCE:null,e.tpl.stars=n.tpl.TPL_ETOILES?n.tpl.TPL_ETOILES:null),e.labelsLoaded=!0,e.loading=!1}))},apiV2Connect:function(e){return new Promise((function(n,t){$.ajax({url:"/api/v2/connect/",method:"POST",data:e,success:function(e){n(e)},error:function(e){t(e)}})}))},ruleCheck:function(e,n){var t={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"not-empty":/\S/,"no-letters":/^([^a-zA-Z]*)$/,"no-number":/^([^0-9]*)$/,"minimum-x-character":function(e){return new RegExp(".{"+e+",}")}},s={email:t.email,name:[t["not-empty"],t["minimum-x-character"](1),t["no-number"]],password:[t["minimum-x-character"](3)],text:t["minimum-x-character"](1)};return Array.isArray(s[e])?-1===s[e].map((function(e){return e.test(n)})).indexOf(!1):s[e].test(n)},specific:function(e,n){"reco"===e?(n.preventDefault(),this.info="reco",this.sendReco()):"help"===e?(n.preventDefault(),this.info="aide"):"signup-email"===e&&(this.specificType=e)},facebookConnect:function(){this.url.facebook&&("reco"===this.info&&this.sendReco(!1),window.open(this.url.facebook,"FBlogin","width=520, height=600"))},setFacebookUrl:function(){var e=this;if(this.facebookUrl)this.url.facebook=this.facebookUrl;else{var n={};this.idAds&&(n.id_annonce=this.idAds),this.fbUrlCall(n).then((function(n){"OK"===n.status?e.url.facebook=n.fb_url:console.log("status: err",n)})).catch((function(e){console.log(e)}))}},fbUrlCall:function(e){return new Promise((function(n,t){$.ajax({type:"GET",url:"/a/fbUrl/",data:e,success:function(e){n(e)},error:function(e){t(e)}})}))},googleConnectErr:function(e){this.errors[this.currentVisible]=e.msg_erreur},resetErrors:function(){this.errors={signup:"",signin:"",reset:""}},treatTrad:function(e,n){if("string"==typeof e&&"object"==d(n)){var t=e;for(var s in n)t=t.replace(new RegExp("@".concat(s.toUpperCase(),"@"),"g"),n[s]);return t}}},watch:{currentVisible:function(e,n){if(n===this.ids.signin&&this.ids.signup){var t={email:this.inputs["signin-email"],password:this.inputs["signin-password"]};this.signupInput=Object.assign({},this.signupInput,t)}else if(n===this.ids.signup&&this.ids.signin){var s={"signin-email":this.signupInput.email,"signin-password":this.signupInput.password};this.inputs=Object.assign({},this.inputs,s)}e===this.ids.signup&&(this.emailSignupVisible=!1,this.errors.signup=!1),e!==n&&(this.inputsValidation={},this.resetErrors())},modalVisible:function(e,n){this.modalVisibleAlreadyOpened?"signup-email"===this.specificType&&e&&(this.emailSignupVisible=!0):(this.modalVisibleAlreadyOpened=!0,this.labelsTplCall()),n&&!e&&(this.success={reset:""},this.resetErrors()),e&&!this.url.facebook&&this.setFacebookUrl()},emailSignupVisible:function(e,n){e&&(this.errors.signup="")},labelsLoaded:function(e){"signup-email"===this.specificType&&e&&(this.emailSignupVisible=!0)}},mounted:function(){this.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this.initialState&&this.setVisible(!0),this.currentVisible=this.ids.signin,new o.b(this.elementHandler.google,{info:null,complement:null,idAds:this.idAds})},props:{initialState:{type:Boolean,default:!1},info:{default:null},complement:{default:null},idAds:{default:null},facebookUrl:{default:null}}}),n=new i.a({el:"#connect-modal",components:{connect:e}}),t=n.$refs?n.$refs.connect:null;if(t){Object(o.j)("click",".connect-modal",(function(e){var n,s=null===(n=e.target)||void 0===n?void 0:n.closest(".connect-modal"),i=t.ids,a=s.dataset.connectId,l=s.dataset.connectType;"reco"!==l||t.formRecoAlreadyClicked||t.specific(l,e),"help"!==l||t.formHelpAlreadyClicked||t.specific(l,e),"signup-email"===l&&t.specific(l,e),t.openModal(i[a],l)}))}}}}]);